use std::sync::mpsc;

use alloy::{
    hex::FromHex,
    signers::local::PrivateKeySigner,
};
use alloy_network::EthereumWallet;
use alloy_primitives::{bytes::Bytes, Address, B256};
use alloy_provider::ProviderBuilder;
use alloy_sol_types::sol;

sol! {
    #[sol(rpc)] // <-- Important! Generates the necessary `MyContract` struct and function methods.
    #[sol(bytecode = "6080604052348015600e575f80fd5b50612b718061001c5f395ff3fe608060405234801561000f575f80fd5b506004361061007b575f3560e01c80636b61d8e7116100595780636b61d8e7146100e9578063eddf243c14610119578063f11817b214610135578063ffa1ad74146101515761007b565b80632a5104361461007f57806341493c601461009d57806344f63692146100b9575b5f80fd5b61008761016f565b604051610094919061223f565b60405180910390f35b6100b760048036038101906100b291906122f4565b610198565b005b6100d360048036038101906100ce91906123a6565b610332565b6040516100e09190612480565b60405180910390f35b61010360048036038101906100fe9190612499565b610491565b604051610110919061223f565b60405180910390f35b610133600480360381019061012e9190612505565b61050e565b005b61014f600480360381019061014a9190612566565b6107a9565b005b610159610d65565b6040516101669190612614565b60405180910390f35b5f7f6a2906ac6ec461c8cacd5b3557157f59317bd572e57bc8253975aaf5c5acb4885f1b905090565b5f82825f906004926101ac9392919061263c565b906101b791906126b7565b90505f6101c261016f565b9050807bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916146102485781816040517f988066a100000000000000000000000000000000000000000000000000000000815260040161023f929190612724565b60405180910390fd5b5f6102538787610491565b905061025d61219e565b885f1c815f600281106102735761027261274b565b5b602002018181525050815f1c816001600281106102935761029261274b565b5b6020020181815250505f868660049080926102b09392919061263c565b8101906102bd91906128c8565b90503073ffffffffffffffffffffffffffffffffffffffff1663eddf243c82846040518363ffffffff1660e01b81526004016102fa9291906129f2565b5f6040518083038186803b158015610310575f80fd5b505afa158015610322573d5f803e3d5ffd5b5050505050505050505050505050565b61033a6121c0565b610373825f600881106103505761034f61274b565b5b6020020135836001600881106103695761036861274b565b5b6020020135610da2565b815f600481106103865761038561274b565b5b6020020181815250506103fb826003600881106103a6576103a561274b565b5b6020020135836002600881106103bf576103be61274b565b5b6020020135846005600881106103d8576103d761274b565b5b6020020135856004600881106103f1576103f061274b565b5b6020020135610f50565b8260026004811061040f5761040e61274b565b5b60200201836001600481106104275761042661274b565b5b602002018281525082815250505061046f8260066008811061044c5761044b61274b565b5b6020020135836007600881106104655761046461274b565b5b6020020135610da2565b816003600481106104835761048261274b565b5b602002018181525050919050565b5f7f1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff5f1b600284846040516104c7929190612a57565b602060405180830381855afa1580156104e2573d5f803e3d5ffd5b5050506040513d601f19601f820116820180604052508101906105059190612a83565b16905092915050565b5f806105198361151c565b915091505f6040516101008682377f0102924fa589cc9cc272153299c55aa9cf873ae19ec804fd4d7faee9bbba3a6d6101008201527f0906afea03832c7170dec8132522d8afe392e4e14213f99e7375be68dae93de06101208201527f1f2a1d3301dbc16fffb9c5dd8408cfcc314798030ee6da3e403e5af7c8f146b16101408201527f1f051ca2bb047f3042cc7bf8678a7bb42dd43e28a7b4d8742155d5f6481113366101608201527f2b93c0e5bbf8221957b2f7d78d1d2e84dbff4b8254143dfcf2957d0fe86840426101808201527f14c836a3ac0774cd1bdab2355e354f5dab05bc269eaca95a3bc51b49a17ff01c6101a08201527f1bd52260cdb2b01f1cb65c958abd7946dddb9e6349f061fc5ca112cad5ea616a6101c08201527f04a9ddc5de5bf492a7b0007285277600c93093cb32d052c4065299a06c2e0daa6101e08201527f1c30e9a6a47282780922561248a67627b884d238f27c98f3f43ddae7eb71bbd16102008201527f16969df3fba66c1f529cae06997c6d51f0013691c05fe4e8d3c86477d962588361022082015283610240820152826102608201527f0c2a9aeeaa39fd1492a7cd6a5b932cc7d8b9485f03932e05c8db692bb94a66926102808201527f14ef16481bbe2eac517269b09d6c33cbc8d84a05a526f0dc61496daf7133cd776102a08201527f08cf0fe288fa65c4a3c309aba05e15e35c2b1f174d8f446fb2ce69bf544a22e46102c08201527f19d5026a81818ade1679ae3260a0db55f11a130a7ba66f495f5cb4a02f510ef16102e08201526020816103008360085afa915080518216915050806107a2576040517f7fcdd1f400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b5050505050565b6107b16121e2565b5f806107d3855f600481106107c9576107c861274b565b5b60200201356116ee565b915091505f805f80610815896002600481106107f2576107f161274b565b5b60200201358a60016004811061080b5761080a61274b565b5b6020020135611823565b93509350935093505f806108408b6003600481106108365761083561274b565b5b60200201356116ee565b915091505f8061084f8c61151c565b91509150898b5f601881106108675761086661274b565b5b602002018181525050888b6001601881106108855761088461274b565b5b602002018181525050868b6002601881106108a3576108a261274b565b5b602002018181525050878b6003601881106108c1576108c061274b565b5b602002018181525050848b6004601881106108df576108de61274b565b5b602002018181525050858b6005601881106108fd576108fc61274b565b5b602002018181525050838b60066018811061091b5761091a61274b565b5b602002018181525050828b6007601881106109395761093861274b565b5b6020020181815250507f0102924fa589cc9cc272153299c55aa9cf873ae19ec804fd4d7faee9bbba3a6d8b6008601881106109775761097661274b565b5b6020020181815250507f0906afea03832c7170dec8132522d8afe392e4e14213f99e7375be68dae93de08b6009601881106109b5576109b461274b565b5b6020020181815250507f1f2a1d3301dbc16fffb9c5dd8408cfcc314798030ee6da3e403e5af7c8f146b18b600a601881106109f3576109f261274b565b5b6020020181815250507f1f051ca2bb047f3042cc7bf8678a7bb42dd43e28a7b4d8742155d5f6481113368b600b60188110610a3157610a3061274b565b5b6020020181815250507f2b93c0e5bbf8221957b2f7d78d1d2e84dbff4b8254143dfcf2957d0fe86840428b600c60188110610a6f57610a6e61274b565b5b6020020181815250507f14c836a3ac0774cd1bdab2355e354f5dab05bc269eaca95a3bc51b49a17ff01c8b600d60188110610aad57610aac61274b565b5b6020020181815250507f1bd52260cdb2b01f1cb65c958abd7946dddb9e6349f061fc5ca112cad5ea616a8b600e60188110610aeb57610aea61274b565b5b6020020181815250507f04a9ddc5de5bf492a7b0007285277600c93093cb32d052c4065299a06c2e0daa8b600f60188110610b2957610b2861274b565b5b6020020181815250507f1c30e9a6a47282780922561248a67627b884d238f27c98f3f43ddae7eb71bbd18b601060188110610b6757610b6661274b565b5b6020020181815250507f16969df3fba66c1f529cae06997c6d51f0013691c05fe4e8d3c86477d96258838b601160188110610ba557610ba461274b565b5b602002018181525050818b601260188110610bc357610bc261274b565b5b602002018181525050808b601360188110610be157610be061274b565b5b6020020181815250507f0c2a9aeeaa39fd1492a7cd6a5b932cc7d8b9485f03932e05c8db692bb94a66928b601460188110610c1f57610c1e61274b565b5b6020020181815250507f14ef16481bbe2eac517269b09d6c33cbc8d84a05a526f0dc61496daf7133cd778b601560188110610c5d57610c5c61274b565b5b6020020181815250507f08cf0fe288fa65c4a3c309aba05e15e35c2b1f174d8f446fb2ce69bf544a22e48b601660188110610c9b57610c9a61274b565b5b6020020181815250507f19d5026a81818ade1679ae3260a0db55f11a130a7ba66f495f5cb4a02f510ef18b601760188110610cd957610cd861274b565b5b6020020181815250505f610ceb612205565b6020816103008f60085afa9150811580610d1d57506001815f60018110610d1557610d1461274b565b5b602002015114155b15610d54576040517f7fcdd1f400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b505050505050505050505050505050565b60606040518060400160405280600681526020017f76322e302e300000000000000000000000000000000000000000000000000000815250905090565b5f7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4783101580610df257507f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd478210155b15610e29576040517f7fcdd1f400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b5f83148015610e3757505f82145b15610e44575f9050610f4a565b5f610ee27f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4780610e7757610e76612aae565b5b60037f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4780610ea857610ea7612aae565b5b877f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4780610ed857610ed7612aae565b5b898a090908611bfe565b9050808303610efa575f600185901b17915050610f4a565b610f0381611c9a565b8303610f185760018085901b17915050610f4a565b6040517f7fcdd1f400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b92915050565b5f807f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4786101580610fa157507f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd478510155b80610fcc57507f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd478410155b80610ff757507f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd478310155b1561102e576040517f7fcdd1f400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b5f8385878917171703611046575f8091509150611513565b5f805f7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd478061107857611077612aae565b5b60037f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd476110a59190612b08565b7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47806110d4576110d3612aae565b5b8a8c090990505f7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd478061110a57611109612aae565b5b8a7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd478061113a57611139612aae565b5b8c8d090990505f7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47806111705761116f612aae565b5b8a7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47806111a05761119f612aae565b5b8c8d090990507f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47806111d5576111d4612aae565b5b7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd478061120457611203612aae565b5b7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd478061123357611232612aae565b5b8c860984087f2b149d40ceb8aaae81be18991be06ac3b5b4c5e559dbefa33267e6dc24a138e50894506113187f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd478061128e5761128d612aae565b5b7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47806112bd576112bc612aae565b5b7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47806112ec576112eb612aae565b5b8e870984087f2fcd3ac2a640a154eb23960892a85a68f031ca0c8344b23a577dcf1052b9e77508611c9a565b93505050505f806113bb7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd478061135157611350612aae565b5b7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47806113805761137f612aae565b5b8586097f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47806113b2576113b1612aae565b5b87880908611bfe565b90506114487f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47806113ef576113ee612aae565b5b7f183227397098d014dc2822db40c0ac2ecbc0b548b438e5469e10460b6c3e7ea47f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd478061143f5761143e612aae565b5b84880809611d05565b15915050611457838383611d6f565b8093508194505050828714801561146d57508186145b15611495575f8161147e575f611481565b60025b60ff1660028b901b1717945087935061150f565b61149e83611c9a565b871480156114b357506114b082611c9a565b86145b156114dc576001816114c5575f6114c8565b60025b60ff1660028b901b1717945087935061150e565b6040517f7fcdd1f400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b5b5050505b94509492505050565b5f805f60019050604051604081015f7f18270db7f2e69e3bd0ad1c0f55792db8d370947f473d8105bec1af4de7feb81a83527f0fe398a6a755ccf207b6849d2a02efe59ea0c7ed70641ecd23eb3c530792aa3160208401527f2c023e73150aeeb0dbd2a96c466fbe8952bd7f0943f87b309b7b41bed9d95abb82527f0e5238abdec4d3672f4bcab7123a7654f0fd24b786e89c538ec51943c7ed34356020830152863590508060408301527f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f000000181108416935060408260608460075afa8416935060408360808560065afa841693507f0a217a82d4988fdcb9acf214631281d707601235aab54fd4dfbfdd1887fcbdd182527f2c8c537e63b59903d2a5e7f44d19a16832dd645a415f468aade9e6f1ff568c526020830152602087013590508060408301527f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f000000181108416935060408260608460075afa8416935060408360808560065afa841693508251955060208301519450505050806116e8576040517fa54f8e2700000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b50915091565b5f805f8303611702575f809150915061181e565b5f6001808516149050600184901c92507f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47831061176b576040517f7fcdd1f400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6118087f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd478061179d5761179c612aae565b5b60037f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47806117ce576117cd612aae565b5b867f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47806117fe576117fd612aae565b5b8889090908611bfe565b9150801561181c5761181982611c9a565b91505b505b915091565b5f805f805f8614801561183557505f85145b1561184b575f805f809350935093509350611bf5565b5f60018088161490505f6002808916149050600288901c95508694507f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47861015806118b657507f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd478510155b156118ed576040517f7fcdd1f400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b5f7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd478061191d5761191c612aae565b5b60037f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4761194a9190612b08565b7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd478061197957611978612aae565b5b888a090990505f7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47806119af576119ae612aae565b5b887f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47806119df576119de612aae565b5b8a8b090990505f7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4780611a1557611a14612aae565b5b887f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4780611a4557611a44612aae565b5b8a8b090990507f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4780611a7a57611a79612aae565b5b7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4780611aa957611aa8612aae565b5b7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4780611ad857611ad7612aae565b5b8a860984087f2b149d40ceb8aaae81be18991be06ac3b5b4c5e559dbefa33267e6dc24a138e5089650611bbd7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4780611b3357611b32612aae565b5b7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4780611b6257611b61612aae565b5b7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4780611b9157611b90612aae565b5b8c870984087f2fcd3ac2a640a154eb23960892a85a68f031ca0c8344b23a577dcf1052b9e77508611c9a565b9550611bca878786611d6f565b80975081985050508415611bef57611be187611c9a565b9650611bec86611c9a565b95505b50505050505b92959194509250565b5f611c29827f0c19139cb84c680a6e14116da060561765e05aa45a1c72a34f082305b61f3f5261206a565b9050817f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4780611c5b57611c5a612aae565b5b82830914611c95576040517f7fcdd1f400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b919050565b5f7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47808381611ccc57611ccb612aae565b5b067f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd470381611cfd57611cfc612aae565b5b069050919050565b5f80611d31837f0c19139cb84c680a6e14116da060561765e05aa45a1c72a34f082305b61f3f5261206a565b9050827f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4780611d6357611d62612aae565b5b82830914915050919050565b5f805f611e0e7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4780611da457611da3612aae565b5b7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4780611dd357611dd2612aae565b5b8788097f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4780611e0557611e04612aae565b5b898a0908611bfe565b90508315611e2257611e1f81611c9a565b90505b611ead7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4780611e5457611e53612aae565b5b7f183227397098d014dc2822db40c0ac2ecbc0b548b438e5469e10460b6c3e7ea47f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4780611ea457611ea3612aae565b5b848a0809611bfe565b92507f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4780611ede57611edd612aae565b5b611f197f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4780611f1057611f0f612aae565b5b60028609612101565b860991507f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4780611f4c57611f4b612aae565b5b611f867f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4780611f7e57611f7d612aae565b5b848509611c9a565b7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4780611fb557611fb4612aae565b5b858609088614158061202a57507f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4780611ff157611ff0612aae565b5b7f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47806120205761201f612aae565b5b8385096002098514155b15612061576040517f7fcdd1f400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b50935093915050565b5f8060405160208152602080820152602060408201528460608201528360808201527f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4760a082015260208160c08360055afa91508051925050806120fa576040517f7fcdd1f400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b5092915050565b5f61212c827f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd4561206a565b905060017f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd478061215f5761215e612aae565b5b82840914612199576040517f7fcdd1f400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b919050565b6040518060400160405280600290602082028036833780820191505090505090565b6040518060800160405280600490602082028036833780820191505090505090565b604051806103000160405280601890602082028036833780820191505090505090565b6040518060200160405280600190602082028036833780820191505090505090565b5f819050919050565b61223981612227565b82525050565b5f6020820190506122525f830184612230565b92915050565b5f604051905090565b5f80fd5b5f80fd5b61227281612227565b811461227c575f80fd5b50565b5f8135905061228d81612269565b92915050565b5f80fd5b5f80fd5b5f80fd5b5f8083601f8401126122b4576122b3612293565b5b8235905067ffffffffffffffff8111156122d1576122d0612297565b5b6020830191508360018202830111156122ed576122ec61229b565b5b9250929050565b5f805f805f6060868803121561230d5761230c612261565b5b5f61231a8882890161227f565b955050602086013567ffffffffffffffff81111561233b5761233a612265565b5b6123478882890161229f565b9450945050604086013567ffffffffffffffff81111561236a57612369612265565b5b6123768882890161229f565b92509250509295509295909350565b5f819050826020600802820111156123a05761239f61229b565b5b92915050565b5f61010082840312156123bc576123bb612261565b5b5f6123c984828501612385565b91505092915050565b5f60049050919050565b5f81905092915050565b5f819050919050565b5f819050919050565b612401816123ef565b82525050565b5f61241283836123f8565b60208301905092915050565b5f602082019050919050565b612433816123d2565b61243d81846123dc565b9250612448826123e6565b805f5b8381101561247857815161245f8782612407565b965061246a8361241e565b92505060018101905061244b565b505050505050565b5f6080820190506124935f83018461242a565b92915050565b5f80602083850312156124af576124ae612261565b5b5f83013567ffffffffffffffff8111156124cc576124cb612265565b5b6124d88582860161229f565b92509250509250929050565b5f819050826020600202820111156124ff576124fe61229b565b5b92915050565b5f80610140838503121561251c5761251b612261565b5b5f61252985828601612385565b92505061010061253b858286016124e4565b9150509250929050565b5f819050826020600402820111156125605761255f61229b565b5b92915050565b5f8060c0838503121561257c5761257b612261565b5b5f61258985828601612545565b925050608061259a858286016124e4565b9150509250929050565b5f81519050919050565b5f82825260208201905092915050565b8281835e5f83830152505050565b5f601f19601f8301169050919050565b5f6125e6826125a4565b6125f081856125ae565b93506126008185602086016125be565b612609816125cc565b840191505092915050565b5f6020820190508181035f83015261262c81846125dc565b905092915050565b5f80fd5b5f80fd5b5f808585111561264f5761264e612634565b5b838611156126605761265f612638565b5b6001850283019150848603905094509492505050565b5f82905092915050565b5f7fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b5f82821b905092915050565b5f6126c28383612676565b826126cd8135612680565b9250600482101561270d576127087fffffffff00000000000000000000000000000000000000000000000000000000836004036008026126ab565b831692505b505092915050565b61271e81612680565b82525050565b5f6040820190506127375f830185612715565b6127446020830184612715565b9392505050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52603260045260245ffd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b6127ae826125cc565b810181811067ffffffffffffffff821117156127cd576127cc612778565b5b80604052505050565b5f6127df612258565b90506127eb82826127a5565b919050565b5f67ffffffffffffffff82111561280a57612809612778565b5b602082029050919050565b61281e816123ef565b8114612828575f80fd5b50565b5f8135905061283981612815565b92915050565b5f61285161284c846127f0565b6127d6565b9050806020840283018581111561286b5761286a61229b565b5b835b818110156128945780612880888261282b565b84526020840193505060208101905061286d565b5050509392505050565b5f82601f8301126128b2576128b1612293565b5b60086128bf84828561283f565b91505092915050565b5f61010082840312156128de576128dd612261565b5b5f6128eb8482850161289e565b91505092915050565b5f60089050919050565b5f81905092915050565b5f819050919050565b5f602082019050919050565b612926816128f4565b61293081846128fe565b925061293b82612908565b805f5b8381101561296b5781516129528782612407565b965061295d83612911565b92505060018101905061293e565b505050505050565b5f60029050919050565b5f81905092915050565b5f819050919050565b5f602082019050919050565b6129a581612973565b6129af818461297d565b92506129ba82612987565b805f5b838110156129ea5781516129d18782612407565b96506129dc83612990565b9250506001810190506129bd565b505050505050565b5f61014082019050612a065f83018561291d565b612a1461010083018461299c565b9392505050565b5f81905092915050565b828183375f83830152505050565b5f612a3e8385612a1b565b9350612a4b838584612a25565b82840190509392505050565b5f612a63828486612a33565b91508190509392505050565b5f81519050612a7d81612269565b92915050565b5f60208284031215612a9857612a97612261565b5b5f612aa584828501612a6f565b91505092915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601260045260245ffd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f612b12826123ef565b9150612b1d836123ef565b9250828203905081811115612b3557612b34612adb565b5b9291505056fea2646970667358221220a14b313bea6744fff00e1dc1e8d86412cbef752a41187d7c6d1a19c4e449239d64736f6c63430008190033")] // <-- Generates the `BYTECODE` static and the `deploy` metho.
    contract Counter {
        constructor(address) {} // The `deploy` method will also include any constructor arguments.

        #[derive(Debug)]
        function verifyProof(
            bytes32 programVKey,
            bytes calldata publicValues,
            bytes calldata proofBytes
        ) external view;
    }
}

pub async fn post_to_l1(rx: mpsc::Receiver<u64>) {
    let contract_address = std::env::var("CONTRACT_ADDRESS").unwrap();
    let private_key = std::env::var("PRIVATE_KEY").unwrap();
    let rpc_url = std::env::var("RPC_URL").unwrap();
    let contract_address = Address::from_hex(contract_address).unwrap();
    let signer = PrivateKeySigner::from_bytes(&B256::from_hex(private_key).unwrap()).unwrap();
    let wallet = EthereumWallet::from(signer);

    loop {
        let block_number = rx.recv();
        match block_number {
            Ok(bn) => {
                if true {
                    _ = bn;
                    return 
                }
                let provider = ProviderBuilder::new()
                    .with_cached_nonce_management()
                    .wallet(wallet.clone())
                    .on_builtin(&rpc_url)
                    .await
                    .unwrap();
                let contract = Counter::new(contract_address, provider.clone());

                let byte_value = Bytes::new();
                let byte_value2 = Bytes::new();
                let call_builder = contract.verifyProof(alloy_primitives::FixedBytes([0u8;32]), alloy_primitives::Bytes(byte_value), alloy_primitives::Bytes(byte_value2));
                _ = call_builder.call().await.unwrap();
                // TODO: send the proof back to the L1 chain                
            }
            Err(_) => break,
        }
    }
}
